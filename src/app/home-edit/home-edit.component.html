<section name="home-edit-page">
  <mat-card class="home-edit-container" role="main">
    <!-- page-title -->
    <mat-card-title class="home-edit-container__title">Edit Home Page Details</mat-card-title>
    <!-- body -->
    <mat-card-content class="home-edit-container__contents">
      <form [formGroup]="homeEditForm" (ngSubmit)="onSubmit()" *ngIf="(displaySpinner | async) === false; else displayLoadingSpinner">
        <!-- edit tile -->
        <div class="form-group">
          <mat-form-field appearance="standard">
            <mat-label>Title</mat-label>
            <input matInput placeholder="Title" formControlName="title">
            <mat-error *ngIf="homeEditForm.get('title')?.errors">Please enter valid title</mat-error>
          </mat-form-field>
        </div>

        <!-- edit subtile -->
        <div class="form-group">
          <mat-form-field appearance="standard">
            <mat-label>Subtitle</mat-label>
            <input matInput placeholder="Subtitle" formControlName="subtitle">
            <mat-error *ngIf="homeEditForm.get('subtitle')?.errors">Please enter valid subtitle</mat-error>
          </mat-form-field>
        </div>

        <!-- edit description -->
        <div class="form-group">
          <mat-form-field appearance="standard">
            <mat-label>Description</mat-label>
            <textarea matInput placeholder="Description" formControlName="description" rows="5"></textarea>
            <mat-error *ngIf="homeEditForm.get('description')?.errors">Please enter valid description</mat-error>
          </mat-form-field>
        </div>

        <!-- edit Image -->
        <mat-label class="custom-label">Upload Image</mat-label>
        <div class="image-form-group">
          <div>
            <button type="button" mat-raised-button color="warn" (click)="imgFileInput.click()">
              <mat-icon>add</mat-icon>
              <span>Update Profile Picture</span>
            </button>
            <input hidden type="file" #imgFileInput (change)="previewImage($event)" />
          </div>
          <img [src]="imageUrl" alt="image">
        </div>

        <!-- edit social handles -->
        <div class="social-handles-form-group" formArrayName="socialHandles">
          <mat-label class="custom-label">Update Social Handles</mat-label>
          <div class="social-handles-form-group__border" *ngFor="let control of socialHandlesControlFn; let i=index" [formGroupName]="i">
            <div class="label">
              <mat-form-field appearance="standard">
                <mat-label>Label Text</mat-label>
                <input matInput placeholder="Label Text" formControlName="title">
                <mat-error *ngIf="control.get('title')?.errors">Please enter valid label</mat-error>
              </mat-form-field>
            </div>
            <div class="url">
              <mat-form-field appearance="standard">
                <mat-label>URL</mat-label>
                <input matInput placeholder="URL" formControlName="url">
                <mat-error *ngIf="control.get('url')?.errors">Please enter valid url</mat-error>
              </mat-form-field>
            </div>
            <!-- remove social handles -->
            <button mat-raised-button type="button" color="warn" (click)="removeSocialHandle(i)">Delete</button>
          </div>
          <!-- add social handles -->
          <button type="button" mat-button (click)="addNewSocialHandle()">
            <mat-icon>add</mat-icon>
            <span>Add New Social Handle</span>
          </button>
        </div>

        <!-- submit / cancel buttons -->
        <div class="home-edit-container__contents__cta">
          <button mat-raised-button type="button" color="primary" (click)="backToHomePage()">Cancel</button>
          <button mat-raised-button type="submit" color="accent" [disabled]="!homeEditForm.valid">Save</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</section>

<ng-template #displayLoadingSpinner>
  <mat-spinner class="home-edit-container__spinner" [diameter]="100"></mat-spinner>
</ng-template>
